{"version":3,"sources":["assets/script/tool/utils.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nexport const UtilsTool = {\r\n\r\n    /**\r\n     * 时间转换，秒->分秒, mm:ss\r\n     */\r\n    timeChange(value) {\r\n        value = +value;\r\n        let minute: number = Math.floor(value / 60);\r\n        let second: number = Math.floor(value % 60);\r\n        let minStr: string = \"\"\r\n        if (minute < 10) {        //分钟\r\n            minStr = \"0\" + minute\r\n        } else {\r\n            minStr = minute.toString();\r\n        }\r\n        let secStr: string = \"\"\r\n        if (second < 10) {        //秒数\r\n            secStr = \"0\" + second\r\n        } else {\r\n            secStr = second.toString();\r\n        }\r\n        return `${minStr}:${secStr}`;\r\n    },\r\n\r\n\r\n    //返回范围的随机数\r\n    getRandomInt(min: number, max: number): number {\r\n        return Math.floor(Math.random() * (max - min + 0.999999999)) + min;\r\n    },\r\n\r\n    // 全屏窗口背景图适配\r\n    adapterBg(bgNode: cc.Node) {\r\n        //背景大图适配 等比缩放 不留黑边\r\n        let _bgWidthScale = cc.winSize.width / bgNode.width;\r\n        let _bgHeightScale = cc.winSize.height / bgNode.height;\r\n        bgNode.scale = Math.max(_bgWidthScale, _bgHeightScale);\r\n    },\r\n\r\n    //转成节点坐标\r\n    changePos(toNode: cc.Node, fromNode: cc.Node) {\r\n        if (!cc.isValid(toNode) || !cc.isValid(fromNode)) return cc.v3(0, 0);\r\n        let _pos = toNode.parent.convertToWorldSpaceAR(toNode.position);\r\n        let _npos = fromNode.parent.convertToNodeSpaceAR(_pos);\r\n        return _npos;\r\n    },\r\n\r\n    //数组打乱\r\n    shuffleArray(array) {\r\n        // 遍历数组\r\n        for (let i = array.length - 1; i > 0; i--) {\r\n            // 随机生成一个 0 到 i（包含）之间的整数\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            // 交换当前元素和随机选择的元素\r\n            [array[i], array[j]] = [array[j], array[i]];\r\n        }\r\n        return array;\r\n    },\r\n\r\n    //在数组中随机抽几个出来\r\n    getRandomThree(array, num) {\r\n        let roundomArr = this.shuffleArray(array);\r\n        return roundomArr.slice(0, num);\r\n    },\r\n\r\n\r\n\r\n\r\n    //------------------------------------------anim---------------------------------------------------------------\r\n    delayCallBack(time: number, _callback: any, nodeDelay?: cc.Node): void {\r\n        let CanvasNode = cc.director.getScene().getChildByName('Canvas');\r\n        if (cc.isValid(nodeDelay)) {\r\n            CanvasNode = nodeDelay;\r\n        }\r\n        // cc.Tween.stopAllByTarget(CanvasNode);//这里不能停止CanvasNode的所有动作\r\n        cc.tween(CanvasNode)\r\n            .delay(time)\r\n            .call(() => { if (_callback) _callback(); })\r\n            .start();\r\n    },\r\n\r\n    playSp(spSkel: sp.Skeleton, name: string, isLoop: boolean = false, endCallback: Function = null): void {\r\n        spSkel.setCompleteListener(() => {\r\n            if (endCallback) {\r\n                this.delayCallBack(0.02, () => {\r\n                    endCallback();\r\n                }, spSkel.node);\r\n            }\r\n            spSkel.setCompleteListener(null);\r\n            // spSkel.setDisposeListener(endCallback);\r\n        });\r\n        spSkel.setAnimation(0, name, isLoop);\r\n    },\r\n    stopSp(spSkel: sp.Skeleton): void {\r\n        spSkel.setCompleteListener(null);\r\n        // spSkel.clearTracks();\r\n    },\r\n\r\n    // 序列动画(添加一个动画到尾巴 还可以延迟几秒)\r\n    addSequenceSp(spSkel: sp.Skeleton, name: string, isLoop: boolean = false, delayTime?: number): void {\r\n        if (delayTime) {\r\n            spSkel.addAnimation(0, name, isLoop, delayTime);\r\n        } else {\r\n            spSkel.addAnimation(0, name, isLoop);\r\n        }\r\n    },\r\n\r\n\r\n    // name 动画师加的事件名\r\n    setFraListenSp(spSkel: sp.Skeleton, name: string, func: Function): void {\r\n        spSkel.setEventListener((tracIndex, event) => {\r\n            if (event.data.name == name) {\r\n                if (func) {\r\n                    func();\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    // 多事件名监听\r\n    setFraListenSpEx(spSkel: sp.Skeleton, func: (name: string) => void): void {\r\n        spSkel.setEventListener((tracIndex, event) => {\r\n            if (func) {\r\n                func(event.data.name);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport const scene = {\r\n    game: \"game\",\r\n    hall: \"hall\",\r\n    loading: \"loading\",\r\n}\r\n\r\nexport const dialog = {\r\n    setting_dialog: \"setting_dialog\",\r\n    clause_dialog: \"clause_dialog\",\r\n    confirmExit_dialog: \"confirmExit_dialog\",\r\n    timeOut_dialog: \"timeOut_dialog\",\r\n    comment_dialog: \"comment_dialog\",\r\n    gameover_dialog: \"gameover_dialog\",\r\n   \r\n}"]}