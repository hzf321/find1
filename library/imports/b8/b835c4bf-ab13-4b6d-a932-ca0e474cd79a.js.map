{"version":3,"sources":["assets/script/tool/BxAutoAsset.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,mBAAmB,GAAG,UAAS,MAAe;IACjE,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;IACzD,IAAG,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAC;QACrB,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;KACxD;IACD,QAAQ,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;AACzC,CAAC,CAAA;AAED,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,oBAAoB,GAAG,UAAS,OAAkB;IACrE,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;IACzD,IAAG,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAC;QACrB,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC;KACxD;IACD,KAAyB,UAAO,EAAP,mBAAO,EAAP,qBAAO,EAAP,IAAO,EAAE;QAA7B,IAAM,SAAS,gBAAA;QAChB,QAAQ,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;KAC3C;AACL,CAAC,CAAA;AAED,wHAAwH;AAEjH,IAAA,OAAO,GAAI,EAAE,CAAC,UAAU,QAAjB,CAAkB;AAGhC;IAA+C,qCAAY;IAA3D;QAAA,qEAuBC;QArBW,oBAAc,GAAe,EAAE,CAAC;;IAqB5C,CAAC;IAlBU,+CAAmB,GAA1B,UAA2B,MAAe;QACtC,IAAG,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,EAAC;YAClB,MAAM,CAAC,MAAM,EAAE,CAAC;YAChB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACjC,wDAAwD;SAC3D;IACL,CAAC;IAED,qCAAS,GAAT;QACI,yDAAyD;QACzD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YAC7D,IAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,EAAC;gBACtC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;aACvC;SACJ;QACD,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;IAC7B,CAAC;IArBgB,iBAAiB;QADrC,OAAO;OACa,iBAAiB,CAuBrC;IAAD,wBAAC;CAvBD,AAuBC,CAvB8C,EAAE,CAAC,SAAS,GAuB1D;kBAvBoB,iBAAiB","file":"","sourceRoot":"/","sourcesContent":["cc.Component.prototype.addAutoReleaseAsset = function(_asset:cc.Asset) {\r\n    let tempAuto = this.node.getComponent(AutoReleaseAssets);\r\n    if(!cc.isValid(tempAuto)){\r\n        tempAuto = this.node.addComponent(AutoReleaseAssets);\r\n    }\r\n    tempAuto.addAutoReleaseAsset(_asset);\r\n}\r\n\r\ncc.Component.prototype.addAutoReleaseAssets = function(_assets:cc.Asset[]) {\r\n    let tempAuto = this.node.getComponent(AutoReleaseAssets);\r\n    if(!cc.isValid(tempAuto)){\r\n        tempAuto = this.node.addComponent(AutoReleaseAssets);\r\n    }\r\n    for (const _assetOne  of _assets) {\r\n        tempAuto.addAutoReleaseAsset(_assetOne);\r\n    }\r\n}\r\n\r\n//-----------------------------------------------------------------------------------------------------AutoReleaseAssets\r\n\r\nconst {ccclass} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AutoReleaseAssets extends cc.Component {\r\n\r\n    private dynamicsAssets: cc.Asset[] = [];\r\n\r\n\r\n    public addAutoReleaseAsset(_asset:cc.Asset){\r\n        if(cc.isValid(_asset)){\r\n            _asset.addRef();\r\n            this.dynamicsAssets.push(_asset);\r\n            // console.log(\"当前动态资源长度==\"+this.dynamicsAssets.length);\r\n        }\r\n    }\r\n\r\n    onDestroy(): void {\r\n        // console.log(\"继承cc.Component 拥有生命周期 如果Node销毁就会顺带销毁这里\");\r\n        for (let index = 0; index < this.dynamicsAssets.length; index++) {\r\n            if(cc.isValid(this.dynamicsAssets[index])){\r\n                this.dynamicsAssets[index].decRef();\r\n            }\r\n        }\r\n        this.dynamicsAssets = [];\r\n    }\r\n     \r\n}\r\n"]}